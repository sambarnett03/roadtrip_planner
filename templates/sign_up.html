<!-- templates/sign_up.html (overwrite with this) -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Sign up / Sign in — Roadtrip Planner</title>
    <style>
      body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; padding: 2rem; max-width: 720px; margin: auto; }
      .card { padding: 1.5rem; border-radius: 8px; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
      input { width: 100%; padding: 0.5rem; margin: 0.5rem 0 1rem; border: 1px solid #ddd; border-radius: 4px; }
      button { padding: 0.6rem 1rem; border-radius: 6px; border: none; cursor: pointer; }
      .muted { color: #666; font-size: 0.9rem; }
      .error { color: #b00020; margin-top: .5rem; }
      .success { color: #046306; margin-top: .5rem; }
      .actions { display:flex; gap: 0.5rem; }
      pre.debug { background:#f6f6f6; padding:0.5rem; border-radius:4px; overflow:auto; font-size:0.85rem; }
    </style>
  </head>
  <body>
    <h1>Roadtrip Planner — Sign up / Sign in</h1>

    <div class="card">
      <p class="muted">Create an account with email & password, or sign in to an existing account.</p>

      <label>Email
        <input id="email" type="email" placeholder="you@example.com" />
      </label>

      <label>Password
        <input id="password" type="password" placeholder="Choose a secure password" />
      </label>

      <div class="actions">
        <button id="btn-signup" type="button">Create account</button> 
        <button id="btn-signin" type="button">Sign in</button>
        <button id="btn-signout" type="button" style="display:none;">Sign out</button>
      </div>

      <div id="status" role="status" aria-live="polite"></div>

    </div>

    <p style="margin-top:1rem;">
      <a href="{{ url_for('dashboard') }}">Back to dashboard</a>
    </p>

    <!-- Firebase JS SDKs (compat libs) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <!-- Put the server-provided config into a JS object and expose as window.firebaseConfig -->
    <script>
      (function(){
        // These Jinja values should be set by your sign_up route.
        // They are safe to expose client-side.
        const cfg = {
          apiKey: "{{ firebase_api_key|default('', true) }}",
          authDomain: "{{ firebase_auth_domain|default('', true) }}",
          projectId: "{{ firebase_project_id|default('', true) }}"
        };

        // Basic check / fallback
        if (!cfg.apiKey || !cfg.authDomain) {
          console.warn("Firebase web config appears empty. Check FIREBASE_API_KEY and FIREBASE_AUTH_DOMAIN env values.");
        }
        // Ensure global name that firebase_auth.js expects:
        window.firebaseConfig = cfg;
        // Also expose for immediate debug
        window.__fp_debug = {
          configProvided: cfg,
          now: new Date().toISOString()
        };
      })();
    </script>

    <!-- Your auth logic -->
    <script src="{{ url_for('static', filename='js/firebase_auth.js') }}"></script>

  </body>
</html>
